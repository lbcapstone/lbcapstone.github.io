<!DOCTYPE html>
<html>
<head>
  <title>User Information Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    
    h1 {
      text-align: center;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .section {
      margin-bottom: 40px;
    }
    
    .label {
      font-weight: bold;
    }
  </style>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<body>
  <div class="container">
    <h1>User Information Example</h1>
    
    <div class="section">
      <h2>User Agent</h2>
      <p class="label">User Agent:</p>
      <p id="user-agent"></p>
      <p>This looks like a big random blob of words, but in reality, it contains a lot of really important information about your device. From it, different websites, or even malicous agents from outside the scope of a website, can figure out how best to attack a user.</p>
    </div>
    
    <div class="section">
      <h2>Screen Resolution</h2>
      <p class="label">Screen Resolution:</p>
      <p id="screen-resolution"></p>
      <p>The screen resolution of a user matters very little. It doesn't give the user's personal information or make their device less safe, but it is important that people know how much of their devices information is given away the second they enter a webpage.</p>
    </div>
    
    <div class="section">
      <h2>Geolocation</h2>
      <p class="label">Location:</p>
      <p id="location"></p>
      <p class="label">Latitude:</p>
      <p id="latitude"></p>
      <p class="label">Longitude:</p>
      <p id="longitude"></p>
      <p>Geolocation is probable one of the most worrying parts of this page. Without even clicking a button that allows for users to allow or deny use of location, a website like this one can track you, not just to a state or city, but to an exact latitude and longitude.</p>
    </div>
    
    <div class="section">
      <h2>Cookies</h2>
      <p class="label">Cookies Enabled:</p>
      <p id="cookies-enabled"></p>
      <p>Cookies being enabled allows websites to store data through web sessions. This is not a bad things. In fact, this really allows a website to log you in faster, and keep your credentials saved. However, these days, most websites don't allow you to fully turn them off, as they claim to need a certain amount to work in the first place. Because of this, it is important to know how information can be stored through web sessions, even if you completely clear your browser history or reload the page.</p>
    </div>
    
    <div class="section">
      <h2>Local Storage</h2>
      <p class="label">Local Storage Support:</p>
      <p id="local-storage-support"></p>
      <p>Local storage is somewhat similar to cookies because they store information through web sessions. However they do have some differences. For instance, local storage is completely local. A server that is hosting a website cannot access any data store in local storage, while data stored in cookies is available to a server. This makes local storage much more save and private. However, it is rarely used, as it doesn't allow websites to be able to fully use the data that is collected through cookies.</p>
    </div>
    
    <div class="section">
      <h2>Session Storage</h2>
      <p class="label">Session Storage Support:</p>
      <p id="session-storage-support"></p>
      <p>Session storage is even more secure, as it doesn't persist through web sessions. Once you reload the page or close the browser, it is completely cleared, and the data is wiped away. Because of this it is rarely used because it makes it harder to save important data is is rquired later.</p>
    </div>
    
    <div class="section">
      <h2>Browser History</h2>
      <p class="label">Browser History Length:</p>
      <p id="history-length"></p>
      <p>Browser history can be accessed in a website, but only in some cases. Generally only the length of the browser history can be seen by a website, but there are some cases, in certain browsers, where this is not the case, and a limited amount of the browser history can be seen. This is clearly a violation of privacy, and even knowing how many sites you have visited recently in a tab is very questionable.</p>
    </div>
    
    <div class="section">
      <h2>Form Input</h2>
      <label for="name" class="label">Name:</label>
      <input type="text" id="name">
      <br>
      <label for="email" class="label">Email:</label>
      <input type="email" id="email">
      <br>
      <label for="password" class="label">Password:</label>
      <input type="password" id="password">
      <p>Many websites have forms like this. It very clearly takes certain pieces of data and uses them to log in. However, it is very important to know what exactly you are submitting when fill out these forms, as your information can be tracked and collected even before you click the submit button, as shown in this example.</p>
    </div>

    <div class="section">
      <h2>Tracked Form Data</h2>
      <p class="label">Name:</p>
      <p id="display-name"></p>
      <p class="label">Email:</p>
      <p id="display-email"></p>
      <p class="label">Password:</p>
      <p id="display-password"></p>
    </div>
    
    <div class="section">
      <h2>Device Orientation</h2>
      <p class="label">Device Orientation:</p>
      <p id="device-orientation"></p>
      <p>Device orientation, like resolution, is a piece of information that doesn't matter very much. It is pretty unimportant, not giving away any sort of secrets or personal information. However, it continues to show how much information is available about your device. Putting many of these small pieces of data together can help identify a person, and to see what exact device they use everyday. This section will show the tilt and rotation of a device, on the x and y axis respectively, or show the word 'null' if it is not supported on the browser or device being used.</p>
    </div>
    
    <div class="section">
      <h2>Network Information</h2>
      <p class="label">Connection Type:</p>
      <p id="connection-type"></p>
      <p class="label">Approximate Speed:</p>
      <p id="connection-speed"></p>
      <p>Finally, there is information about networking. Networking information is important because it can be used to track how exactly you are connecting to the internet. This shows the type of connection, a wifi, cellular, or ethernet connection, and the approximate connection speed, in megabytes per second. The connection type might display as 'Unknown', meaning that the browser does not support giving that information to websites, which does show a way in which browsers can block websites from information that they probably don't need.</p>
    </div>

    <p>Fully, much of this information doesn't seem that bad. However, combining the more worying types of information, like locational and browser informtion, with other kinds of information can create a profile on a person. From there, companies are easily able to predict your movements, actions, and choices, allowing them to optimize with this data for their own benifit. Of course, there is no active harm being done to you, the user, because of this, but it is incredibly important that you know about this, as well as the solutions to these problems.</p>
    <p>Firstly, you can disable javascript. Most of the information that was taken from this website was through the use of javascript. This is basically just code that can run on the client side of a website, meaning that it has direct access to user data. Disabling javascript is available in most browsers. However, disabling this can also mess with websites that require Javascript, making them not function as they should. To do this in Chrome, the browser I use, you click the lock icon directly to the left of the search bar, next to the url. From there click site settings and on the page it brings you to, change the drop down bar next to Javascript to block. After reloading this page, you can see that the data is suddenly gone, as it relied on Javascript to work.</p>
    
  </div>
  
  <script>
    // User Agent
    document.getElementById('user-agent').textContent = navigator.userAgent;
    
    // Screen Resolution
    document.getElementById('screen-resolution').textContent = screen.width + ' x '

    // Screen Resolution
    document.getElementById('screen-resolution').textContent = screen.width + ' x ' + screen.height;
    
    let ip = "";
    $.getJSON("https://api.ipify.org?format=json", function(data) {
      
      // Setting text of element P with id gfg
      ip = data.ip;
    })
    
    fetch(`https://ipapi.co/${ip}/json/`).then(function(response) {
      response.json().then(jsonData => {
        console.log(jsonData)
                document.getElementById('location').textContent = jsonData.city + ', ' + jsonData.region_code;
                document.getElementById('latitude').textContent = jsonData.latitude;
                document.getElementById('longitude').textContent = jsonData.longitude;
            })
        }).catch(function(error) {
            console.log(error)
        })

// Geolocation
// if ('geolocation' in navigator) {
//   navigator.geolocation.getCurrentPosition(function(position) {
//     document.getElementById('latitude').textContent = position.coords.latitude;
//     document.getElementById('longitude').textContent = position.coords.longitude;
//   });
// } else {
//   document.getElementById('latitude').textContent = 'Geolocation not supported';
//   document.getElementById('longitude').textContent = 'Geolocation not supported';
// }

// Cookies
document.getElementById('cookies-enabled').textContent = navigator.cookieEnabled ? 'Enabled' : 'Disabled';

// Local Storage
document.getElementById('local-storage-support').textContent = typeof(Storage) !== 'undefined' ? 'Supported' : 'Not supported';

// Session Storage
document.getElementById('session-storage-support').textContent = typeof(sessionStorage) !== 'undefined' ? 'Supported' : 'Not supported';

// Browser History
document.getElementById('history-length').textContent = window.history.length;

document.getElementById('name').addEventListener('input', function(event) {
      document.getElementById('display-name').textContent = event.target.value;
    });

    document.getElementById('email').addEventListener('input', function(event) {
      document.getElementById('display-email').textContent = event.target.value;
    });

    document.getElementById('password').addEventListener('input', function(event) {
      document.getElementById('display-password').textContent = event.target.value;
    });

// Device Orientation
window.addEventListener('deviceorientation', function(event) {
  document.getElementById('device-orientation').textContent = 'Tilt: ' + event.beta + ', Rotation: ' + event.gamma;
});

// Network Information
if ('connection' in navigator) {
  var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
  document.getElementById('connection-type').textContent = connection.type || 'Unknown';
  document.getElementById('connection-speed').textContent = connection.downlink || 'Unknown';
} else {
  document.getElementById('connection-type').textContent = 'Not supported';
  document.getElementById('connection-speed').textContent = 'Not supported';
}
</script>
</body>
</html>